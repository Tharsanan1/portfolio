---
import experience from '../data/experience.json';
---

<section id="experience" class="py-20 bg-[var(--bg-secondary)]">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12 animate-on-scroll">
      <h2 class="text-3xl sm:text-4xl font-bold text-[var(--text-primary)] mb-4">Experience</h2>
      <div class="w-20 h-1 bg-[var(--accent)] mx-auto rounded-full"></div>
      <p class="mt-4 text-[var(--text-secondary)] max-w-2xl mx-auto">
        My professional journey in software engineering
      </p>
    </div>

    <!-- Timeline -->
    <div class="relative">
      <!-- Vertical line -->
      <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-[var(--border)] md:-translate-x-1/2"></div>

      <div class="space-y-8">
        {experience.experiences.map((exp, index) => (
          <div class={`relative flex flex-col md:flex-row gap-8 ${index % 2 === 0 ? 'md:flex-row-reverse' : ''}`}>
            <!-- Timeline dot -->
            <div class="absolute left-4 md:left-1/2 w-4 h-4 rounded-full bg-[var(--accent)] border-4 border-[var(--bg-secondary)] -translate-x-1/2 mt-6 z-10">
              {exp.current && (
                <span class="absolute w-8 h-8 rounded-full bg-[var(--accent)]/30 -left-2 -top-2 animate-ping"></span>
              )}
            </div>

            <!-- Content card -->
            <div class={`w-full md:w-1/2 ${index % 2 === 0 ? 'md:pr-12' : 'md:pl-12'} pl-12 md:pl-0 animate-on-scroll`}>
              <div class="bg-[var(--bg-primary)] p-6 rounded-xl border border-[var(--border)] hover:border-[var(--accent)] transition-colors shadow-sm hover:shadow-md">
                <!-- Header -->
                <div class="flex flex-wrap items-start justify-between gap-2 mb-3">
                  <div>
                    <h3 class="text-xl font-semibold text-[var(--text-primary)]">{exp.role}</h3>
                    <p class="text-[var(--accent)] font-medium">{exp.company}</p>
                  </div>
                  <div class="text-right">
                    <span class={`inline-block px-3 py-1 text-xs font-medium rounded-full ${exp.current ? 'bg-[var(--accent)] text-white' : 'bg-[var(--bg-tertiary)] text-[var(--text-secondary)]'}`}>
                      {exp.current ? 'Current' : exp.period}
                    </span>
                  </div>
                </div>

                <p class="text-sm text-[var(--text-muted)] mb-4">{exp.location}</p>

                <!-- Highlights -->
                <ul class="space-y-2">
                  {exp.highlights.map(highlight => (
                    <li class="flex gap-2 text-sm text-[var(--text-secondary)]">
                      <svg class="w-5 h-5 text-[var(--accent)] shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      <span>{highlight}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>

            <!-- Empty space for alignment -->
            <div class="hidden md:block w-1/2"></div>
          </div>
        ))}
      </div>
    </div>

    <!-- Education -->
    <div class="mt-16 animate-on-scroll">
      <div class="bg-[var(--bg-primary)] p-6 rounded-xl border border-[var(--border)] max-w-2xl mx-auto">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 rounded-lg bg-[var(--accent)]/10 flex items-center justify-center">
            <svg class="w-6 h-6 text-[var(--accent)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/>
            </svg>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-[var(--text-primary)]">University of Moratuwa</h3>
            <p class="text-[var(--text-secondary)]">B.Sc. Eng (Hons) in Computer Science and Engineering</p>
            <p class="text-sm text-[var(--text-muted)]">2015 - 2019 | GPA: 3.8 (First Class)</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
